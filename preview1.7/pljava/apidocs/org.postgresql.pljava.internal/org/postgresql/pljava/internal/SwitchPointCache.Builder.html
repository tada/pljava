<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Fri May 23 21:13:57 EDT 2025 -->
<title>SwitchPointCache.Builder (PL/Java backend Java code 1.7-SNAPSHOT)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-05-23">
<meta name="description" content="declaration: module: org.postgresql.pljava.internal, package: org.postgresql.pljava.internal, class: SwitchPointCache, class: Builder">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/SwitchPointCache.Builder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="module-label-in-type">Module</span>&nbsp;<a href="../../../../module-summary.html">org.postgresql.pljava.internal</a></div>
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.postgresql.pljava.internal</a></div>
<h1 title="Class SwitchPointCache.Builder" class="title">Class SwitchPointCache.Builder&lt;T&gt;</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.postgresql.pljava.internal.SwitchPointCache.Builder&lt;T&gt;</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Enclosing class:</dt>
<dd><code><a href="SwitchPointCache.html" title="class in org.postgresql.pljava.internal">SwitchPointCache</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public static class </span><span class="element-name type-name-label">SwitchPointCache.Builder&lt;T&gt;</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Builder for use during the static initialization of a class that uses
 <code>SwitchPointCache</code>.
<p>
 The builder's constructor is passed information about the class, and
 about a <a href="SwitchPointCache.SwitchPoint.html" title="class in org.postgresql.pljava.internal"><code>SwitchPoint</code></a> that will be used when the
 dependent values need to be invalidated. To accommodate invalidation
 schemes with different granularity, the <code>SwitchPoint</code> used may be
 kept in an instance field of the class, or in a static field and
 governing all instances of the class, or even somewhere else entirely
 and used for widespread or global invalidation.
<p>
 The builder's <a href="#withDependent(java.lang.String,int)"><code>withDependent</code></a> method is then used to
 declare each value that can be computed and cached in an instance of the
 class, by giving the name of a <em>static</em> method that computes the
 value (given one argument, an instance of the class) and functions to get
 and set a <code>MethodHandle</code>-typed per-instance slot where the
 computation result will be cached.
<p>
 Finally, the builder's <a href="#build()"><code>build</code></a> method returns
 a <code>Function&lt;MethodHandle[],MethodHandle[]&gt;</code> that can be saved in
 a static final field and invoked in the object's constructor on a new
 <code>MethodHandle</code> array with the right number of slots; it will
 initialize all of the slots that were declared in <code>withDependent</code>
 calls to their initial, uncomputed states.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(java.lang.Class)" class="member-name-link">Builder</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>&gt;&nbsp;c)</code></div>
<div class="col-last even-row-color">
<div class="block">Create a builder that will be used to declare dependent values
 controlled by a single <code>SwitchPoint</code> and to create an
 initializer for the per-instance slots that will hold their states.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/invoke/MethodHandle.html" title="class or interface in java.lang.invoke" class="external-link">MethodHandle</a>[],<wbr><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/invoke/MethodHandle.html" title="class or interface in java.lang.invoke" class="external-link">MethodHandle</a>[]&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#build()" class="member-name-link">build</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return a <code>Function&lt;MethodHandle[],MethodHandle[]&gt;</code> to be
 invoked in the constructor of a client object, applied to a
 newly-allocated array of the right number of slots, which will
 initialize all of the array's elements with the corresponding
 fallback method handles and return the initialized array.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="SwitchPointCache.Builder.html" title="class in org.postgresql.pljava.internal">SwitchPointCache.Builder</a><wbr>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#withCandidates(java.lang.reflect.Method%5B%5D)" class="member-name-link">withCandidates</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/reflect/Method.html" title="class or interface in java.lang.reflect" class="external-link">Method</a>[]&nbsp;ms)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Supply the candidate methods to be available to subsequent
 <a href="#withDependent(java.lang.String,int)"><code>withDependent</code></a> calls.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="SwitchPointCache.Builder.html" title="class in org.postgresql.pljava.internal">SwitchPointCache.Builder</a><wbr>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#withDependent(java.lang.String,int)" class="member-name-link">withDependent</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;methodName,
 int&nbsp;index)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Declare one dependent item that will be controlled by this builder's
 <code>SwitchPoint</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="SwitchPointCache.Builder.html" title="class in org.postgresql.pljava.internal">SwitchPointCache.Builder</a><wbr>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#withDescriber(java.util.function.Function)" class="member-name-link">withDescriber</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super <a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;describer)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="SwitchPointCache.Builder.html" title="class in org.postgresql.pljava.internal">SwitchPointCache.Builder</a><wbr>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#withLookup(java.lang.invoke.MethodHandles.Lookup)" class="member-name-link">withLookup</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/invoke/MethodHandles.Lookup.html" title="class or interface in java.lang.invoke" class="external-link">MethodHandles.Lookup</a>&nbsp;l)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Supply the <code>Lookup</code> object to be used in resolving dependent
 methods.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="SwitchPointCache.Builder.html" title="class in org.postgresql.pljava.internal">SwitchPointCache.Builder</a><wbr>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#withReceiverType(java.lang.Class)" class="member-name-link">withReceiverType</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;?&gt;&nbsp;t)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Adjust the static receiver type of subsequently declared dependents.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="SwitchPointCache.Builder.html" title="class in org.postgresql.pljava.internal">SwitchPointCache.Builder</a><wbr>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#withReturnType(java.lang.Class)" class="member-name-link">withReturnType</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;?&gt;&nbsp;t)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Adjust the static return type of subsequently declared dependents
 that return references.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="SwitchPointCache.Builder.html" title="class in org.postgresql.pljava.internal">SwitchPointCache.Builder</a><wbr>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#withSlots(java.util.function.Function)" class="member-name-link">withSlots</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/invoke/MethodHandle.html" title="class or interface in java.lang.invoke" class="external-link">MethodHandle</a>[]&gt;&nbsp;slotGetter)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Supply a function mapping a receiver object instance to the
 per-instance <code>MethodHandle</code> array whose elements will be
 the slots.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="SwitchPointCache.Builder.html" title="class in org.postgresql.pljava.internal">SwitchPointCache.Builder</a><wbr>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#withSwitchPoint(java.util.function.Function)" class="member-name-link">withSwitchPoint</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>,<wbr><a href="SwitchPointCache.SwitchPoint.html" title="class in org.postgresql.pljava.internal">SwitchPointCache.SwitchPoint</a>&gt;&nbsp;spGetter)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Supply a function mapping a receiver object instance to the
 <code>SwitchPoint</code> to be associated with subsequently declared
 slots.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(java.lang.Class)">
<h3>Builder</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">Builder</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>&gt;&nbsp;c)</span></div>
<div class="block">Create a builder that will be used to declare dependent values
 controlled by a single <code>SwitchPoint</code> and to create an
 initializer for the per-instance slots that will hold their states.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>c</code> - the class being configured by this Builder</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="withDescriber(java.util.function.Function)">
<h3>withDescriber</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="SwitchPointCache.Builder.html" title="class in org.postgresql.pljava.internal">SwitchPointCache.Builder</a>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>&gt;</span>&nbsp;<span class="element-name">withDescriber</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;? super <a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;describer)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>describer</code> - function, with a signature like that of
 <code>Object.toString</code>, that will produce a useful description of
 the object if needed in an exception message. The default if this
 method is not called is <code>Object::toString</code>; a different
 describer can be supplied if the output of <code>toString</code> isn't
 well suited for an exception message. If null, any exception will
 have its bare constant message with nothing added about the specific
 receiver object.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="withLookup(java.lang.invoke.MethodHandles.Lookup)">
<h3>withLookup</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="SwitchPointCache.Builder.html" title="class in org.postgresql.pljava.internal">SwitchPointCache.Builder</a>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>&gt;</span>&nbsp;<span class="element-name">withLookup</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/invoke/MethodHandles.Lookup.html" title="class or interface in java.lang.invoke" class="external-link">MethodHandles.Lookup</a>&nbsp;l)</span></div>
<div class="block">Supply the <code>Lookup</code> object to be used in resolving dependent
 methods.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>l</code> - a <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/invoke/MethodHandles.Lookup.html" title="class or interface in java.lang.invoke" class="external-link"><code>Lookup</code></a> object obtained by the caller and
 able to introspect in the class</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="withCandidates(java.lang.reflect.Method[])">
<h3>withCandidates</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="SwitchPointCache.Builder.html" title="class in org.postgresql.pljava.internal">SwitchPointCache.Builder</a>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>&gt;</span>&nbsp;<span class="element-name">withCandidates</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/reflect/Method.html" title="class or interface in java.lang.reflect" class="external-link">Method</a>[]&nbsp;ms)</span></div>
<div class="block">Supply the candidate methods to be available to subsequent
 <a href="#withDependent(java.lang.String,int)"><code>withDependent</code></a> calls.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>ms</code> - array of methods such as the caller may obtain with
 <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Class.html#getDeclaredMethods()" title="class or interface in java.lang" class="external-link"><code>getDeclaredMethods</code></a>, avoiding the
 access complications of having this class do it. The methods will be
 filtered to only those that are static with a non-void return type
 and exactly one parameter, assignable from the target class, and
 uniquely named within that set. Only such methods can be named in
 later <a href="#withDependent(java.lang.String,int)"><code>withDependent</code></a> calls. No reference to
 the array will be retained.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="withSwitchPoint(java.util.function.Function)">
<h3>withSwitchPoint</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="SwitchPointCache.Builder.html" title="class in org.postgresql.pljava.internal">SwitchPointCache.Builder</a>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>&gt;</span>&nbsp;<span class="element-name">withSwitchPoint</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>,<wbr><a href="SwitchPointCache.SwitchPoint.html" title="class in org.postgresql.pljava.internal">SwitchPointCache.SwitchPoint</a>&gt;&nbsp;spGetter)</span></div>
<div class="block">Supply a function mapping a receiver object instance to the
 <code>SwitchPoint</code> to be associated with subsequently declared
 slots.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>spGetter</code> - a function usable to fetch the SwitchPoint
 that controls this cache. It is passed an instance of T but need not
 use it (in the case, for example, of a single controlling SwitchPoint
 held in a static).</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="withSlots(java.util.function.Function)">
<h3>withSlots</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="SwitchPointCache.Builder.html" title="class in org.postgresql.pljava.internal">SwitchPointCache.Builder</a>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>&gt;</span>&nbsp;<span class="element-name">withSlots</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/invoke/MethodHandle.html" title="class or interface in java.lang.invoke" class="external-link">MethodHandle</a>[]&gt;&nbsp;slotGetter)</span></div>
<div class="block">Supply a function mapping a receiver object instance to the
 per-instance <code>MethodHandle</code> array whose elements will be
 the slots.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>slotGetter</code> - a function usable to fetch the slot array
 for an instance.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="withReturnType(java.lang.Class)">
<h3>withReturnType</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="SwitchPointCache.Builder.html" title="class in org.postgresql.pljava.internal">SwitchPointCache.Builder</a>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>&gt;</span>&nbsp;<span class="element-name">withReturnType</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;?&gt;&nbsp;t)</span></div>
<div class="block">Adjust the static return type of subsequently declared dependents
 that return references.
<p>
 This can be a more compact notation if compute methods or API methods
 from a superclass or subclass will be reused and the return type
 needs to be adjusted to match the static type in the API method
 (possibly erased from a generic type).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>t</code> - Class to serve as the following dependents' static return
 type. Pass null to discontinue adjusting return types for following
 dependents.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if t represents a primitive type.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="withReceiverType(java.lang.Class)">
<h3>withReceiverType</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="SwitchPointCache.Builder.html" title="class in org.postgresql.pljava.internal">SwitchPointCache.Builder</a>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>&gt;</span>&nbsp;<span class="element-name">withReceiverType</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;?&gt;&nbsp;t)</span></div>
<div class="block">Adjust the static receiver type of subsequently declared dependents.
<p>
 This can be a more compact notation if compute methods or API methods
 from a superclass or subclass will be reused and the receiver type
 needs to be adjusted to match the static type in the API method
 (possibly erased from a generic type).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>t</code> - Class to serve as the following dependents' static receiver
 type. Pass null to discontinue adjusting receiver types for following
 dependents.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if t is neither a widening nor a
 narrowing of the receiver type specified for this builder.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="build()">
<h3>build</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/invoke/MethodHandle.html" title="class or interface in java.lang.invoke" class="external-link">MethodHandle</a>[],<wbr><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/invoke/MethodHandle.html" title="class or interface in java.lang.invoke" class="external-link">MethodHandle</a>[]&gt;</span>&nbsp;<span class="element-name">build</span>()</div>
<div class="block">Return a <code>Function&lt;MethodHandle[],MethodHandle[]&gt;</code> to be
 invoked in the constructor of a client object, applied to a
 newly-allocated array of the right number of slots, which will
 initialize all of the array's elements with the corresponding
 fallback method handles and return the initialized array.
<p>
 The initializer can be used conveniently in a constructor that
 assigns the array to a final field, or calls a superclass constructor
 that does so, to arrange that the array's elements are written
 in advance of Java's freeze of the final array reference field.</div>
</section>
</li>
<li>
<section class="detail" id="withDependent(java.lang.String,int)">
<h3>withDependent</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="SwitchPointCache.Builder.html" title="class in org.postgresql.pljava.internal">SwitchPointCache.Builder</a>&lt;<a href="SwitchPointCache.Builder.html" title="type parameter in SwitchPointCache.Builder">T</a>&gt;</span>&nbsp;<span class="element-name">withDependent</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;methodName,
 int&nbsp;index)</span></div>
<div class="block">Declare one dependent item that will be controlled by this builder's
 <code>SwitchPoint</code>.
<p>
 An item is declared by naming the <em>static</em> method that can
 compute its value when needed, and the index into the per-instance
 <code>MethodHandle[]</code> "slots" array that will be used to cache the
 value. Typically, these will be private, and there will be an API
 method for retrieving the value, by fetching the method handle from
 the array index given here, and invoking it.
<p>
 The method handle that will be found in the named slot has a return
 type matching the compute method named here, and two parameters; it
 expects the receiver object as the first parameter, and itself as
 the second. So the typical API method is simply:
<pre>
 MethodHandle h = slots[MY_SLOT];
 return (cast)h.invokeExact(this, h);
</pre>
<p>
 When there is a cached value and the <code>SwitchPoint</code> has not been
 invalidated, the two arguments are ignored and the cached value
 is returned.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>methodName</code> - name of the static method that will be used to
 compute values for this item. It must be found among the methods
 that were passed to the Builder constructor, only considering those
 that are static, with a non-void return and one argument of
 the class type.</dd>
<dd><code>index</code> - index into the per-instance slot arrray where the cached
 state will be maintained.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2003&#x2013;2025<a href='http://tada.se/eng/'>Tada AB</a></small></p>
</footer>
</div>
</div>
</body>
</html>
