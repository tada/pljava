<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Fri May 23 21:13:51 EDT 2025 -->
<title>Lifespan (PL/Java API 1.7-SNAPSHOT)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-05-23">
<meta name="description" content="declaration: module: org.postgresql.pljava, package: org.postgresql.pljava, interface: Lifespan">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/Lifespan.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li>Constr</li>
<li>Method</li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li>Constr</li>
<li>Method</li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="module-label-in-type">Module</span>&nbsp;<a href="../../../module-summary.html">org.postgresql.pljava</a></div>
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.postgresql.pljava</a></div>
<h1 title="Interface Lifespan" class="title">Interface Lifespan</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Known Subinterfaces:</dt>
<dd><code><a href="model/MemoryContext.html" title="interface in org.postgresql.pljava.model">MemoryContext</a></code>, <code><a href="model/ResourceOwner.html" title="interface in org.postgresql.pljava.model">ResourceOwner</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">Lifespan</span></div>
<div class="block">Model of any notional object in PostgreSQL or PL/Java that has a definite
 temporal existence, with a detectable end, and so can be used to scope the
 lifetime of any PL/Java object that has corresponding native resources.
<p>
 A <code>Lifespan</code> generalizes over assorted classes that can play that role,
 such as PostgreSQL's <a href="model/ResourceOwner.html" title="interface in org.postgresql.pljava.model"><code>ResourceOwner</code></a> and
 <a href="model/MemoryContext.html" title="interface in org.postgresql.pljava.model"><code>MemoryContext</code></a>. <code>MemoryContext</code> may see the most
 use in PL/Java, as the typical reason to scope the lifetime of some PL/Java
 object is that it refers to some allocation of native memory.
<p>
 The invocation of a PL/Java function is also usefully treated as a resource
 owner. It is reasonable to depend on the objects passed in the function call
 to remain usable as long as the call is on the stack, if no other explicit
 lifespan applies.
<p>
 Java's incubating foreign function and memory API will bring a
 <code>ResourceScope</code> object for which some relation to a PL/Java
 <code>Lifespan</code> can probably be defined.
<p>
 The history of PostgreSQL <a href="https://git.postgresql.org/gitweb/?p=postgresql.git;a=blob;f=src/backend/utils/mmgr/README;hb=HEAD">MemoryContext</a>s
 (the older mechanism, appearing in PostgreSQL 7.1), and <a href="https://git.postgresql.org/gitweb/?p=postgresql.git;a=blob;f=src/backend/utils/resowner/README;hb=HEAD">ResourceOwner</a>s
 (introduced in 8.0) is interesting. As the latter's <code>README</code> puts it,
 <q>The design of the ResourceOwner API is modeled on our MemoryContext API,
 which has proven very flexible and successful ... It is tempting to consider
 unifying ResourceOwners and MemoryContexts into a single object type, but
 their usage patterns are sufficiently different ...."</q>
<p>
 Only later, in PostgreSQL 9.5, did <code>MemoryContext</code> gain a callback
 mechanism for detecting reset or delete, with which it also becomes usable
 as a kind of lifespan under PL/Java's broadened view of the concept.
 While not <q>unifying ResourceOwners and MemoryContexts into a single
 object type</q>, PL/Java here makes them both available as subtypes of a
 common interface, so either can be chosen to place an appropriate temporal
 scope on a PL/Java object.</div>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2003&#x2013;2025<a href='http://tada.se/eng/'>Tada AB</a></small></p>
</footer>
</div>
</div>
</body>
</html>
