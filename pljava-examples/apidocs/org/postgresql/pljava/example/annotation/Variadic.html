<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (12.0.2) on Tue Jun 13 18:56:49 EDT 2023 -->
<title>Variadic (PL/Java examples 1.6.5)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2023-06-13">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Variadic (PL/Java examples 1.6.5)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":9,"i1":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Variadic.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.postgresql.pljava.example.annotation</a></div>
<h2 title="Class Variadic" class="title">Class Variadic</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.postgresql.pljava.example.annotation.Variadic</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>@SQLAction(requires={"sumOfSquares","sumOfSquaresBoxed"},
           install={"CREATE FUNCTION javatest.javaformat(  format pg_catalog.text,  VARIADIC args pg_catalog.anyarray  DEFAULT CAST(ARRAY[] AS pg_catalog.text[])) RETURNS pg_catalog.text RETURNS NULL ON NULL INPUT LANGUAGE java AS \'java.lang.String=     java.lang.String.format(java.lang.String,java.lang.Object[])\'","COMMENT ON FUNCTION javatest.javaformat( pg_catalog.text, VARIADIC pg_catalog.anyarray) IS \'Invoke Java\'\'s String.format with a format string and any number of arguments. This is not quite as general as the Java method implies, because, while the variadic argument is declared \'\'anyarray\'\' and its members can have any type, PostgreSQL requires all of them to have the same type in any given call. Furthermore, in the VARIADIC anyarray case, as here, the actual arguments must not all have \'\'unknown\'\' type; if supplying bare literals, one must be cast to a type. PostgreSQL will not recognize a call of a variadic function unless at least one argument to populate the variadic parameter is supplied; to allow calls that don\'\'t pass any, give the variadic parameter an empty-array default, as done here.\'","SELECT  CASE   WHEN s.ok AND d.ok   THEN javatest.logmessage(\'INFO\', \'variadic calls ok\')   ELSE javatest.logmessage(\'WARNING\', \'variadic calls ng\')  END FROM  (SELECT    pg_catalog.every(expect IS NOT DISTINCT FROM got)   FROM    (VALUES     (      \'Hello, world\',      javatest.javaformat(\'Hello, %s\', \'world\'::text)     )    ) AS t(expect, got)  ) AS s(ok),  (SELECT    pg_catalog.every(expect IS NOT DISTINCT FROM got)   FROM    (VALUES     (14.0, javatest.sumOfSquares(1, 2, 3)),     (14.0, javatest.sumOfSquares(1, 2, null, 3)),     ( 0.0, javatest.sumOfSquares()),     (14.0, javatest.sumOfSquaresBoxed(1, 2, 3)),     (null, javatest.sumOfSquaresBoxed(1, 2, null, 3))    ) AS t(expect, got)  ) AS d(ok)"},
           remove="DROP FUNCTION javatest.javaformat(pg_catalog.text,anyarray)")
public class <a href="../../../../../src-html/org/postgresql/pljava/example/annotation/Variadic.html#line.33">Variadic</a>
extends <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></pre>
<div class="block">Provides example methods to illustrate variadic functions.
<p>
 The key is the <code>@Function</code> annotation declaring the function variadic
 to PostgreSQL. The Java method parameter is declared as an ordinary array,
 not with Java's <code>...</code> syntax; in fact, that would be impossible for a
 function with a composite return type (where the Java signature would have to
 include a <code>ResultSet</code> parameter after the variadic input parameter).</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t1" class="tableTab" onclick="show(1);">Static Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>static double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sumOfSquares(double%5B%5D)">sumOfSquares</a></span>&#8203;(double[]&nbsp;vals)</code></th>
<td class="colLast">
<div class="block">Compute a double-precision sum of squares, treating any null input
 as zero.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Double.html?is-external=true" title="class or interface in java.lang" class="externalLink">Double</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sumOfSquaresBoxed(java.lang.Double%5B%5D)">sumOfSquaresBoxed</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Double.html?is-external=true" title="class or interface in java.lang" class="externalLink">Double</a>[]&nbsp;vals)</code></th>
<td class="colLast">
<div class="block">Compute a double-precision sum of squares, returning null if any input
 value is null.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="sumOfSquaresBoxed(java.lang.Double[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sumOfSquaresBoxed</h4>
<pre class="methodSignature">@Function(schema="javatest",
          effects=IMMUTABLE,
          onNullInput=RETURNS_NULL,
          variadic=true,
          provides="sumOfSquaresBoxed")
public static&nbsp;<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Double.html?is-external=true" title="class or interface in java.lang" class="externalLink">Double</a>&nbsp;<a href="../../../../../src-html/org/postgresql/pljava/example/annotation/Variadic.html#line.112">sumOfSquaresBoxed</a>&#8203;(<a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Double.html?is-external=true" title="class or interface in java.lang" class="externalLink">Double</a>[]&nbsp;vals)</pre>
<div class="block">Compute a double-precision sum of squares, returning null if any input
 value is null.
<p>
 The <code>RETURNS_NULL</code> annotation does not mean the array collecting
 the variadic arguments cannot have null entries; it only means PostgreSQL
 will never call this function with null for the array itself.</div>
</li>
</ul>
<a id="sumOfSquares(double[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>sumOfSquares</h4>
<pre class="methodSignature">@Function(schema="javatest",
          effects=IMMUTABLE,
          onNullInput=RETURNS_NULL,
          variadic=true,
          provides="sumOfSquares")
public static&nbsp;double&nbsp;<a href="../../../../../src-html/org/postgresql/pljava/example/annotation/Variadic.html#line.141">sumOfSquares</a>&#8203;(@SQLType(defaultValue={})
                                  double[]&nbsp;vals)</pre>
<div class="block">Compute a double-precision sum of squares, treating any null input
 as zero.
<p>
 The <code>RETURNS_NULL</code> annotation does not mean the array collecting
 the variadic arguments cannot have null entries; it only means PostgreSQL
 will never call this function with null for the array itself. Because
 the Java parameter type here is primitive and cannot represent nulls,
 PL/Java will have silently replaced any nulls in the input with zeros.
<p>
 This version also demonstrates using <code>@SQLType</code> to give
 the variadic parameter an empty-array default, so PostgreSQL will allow
 the function to be called with no corresponding arguments. Without that,
 PostgreSQL won't recognize a call to the function unless at least one
 argument corresponding to the variadic parameter is supplied.</div>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Variadic.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2003&#x2013;2023<a href='http://tada.se/eng/'>Tada AB</a></small></p>
</footer>
</body>
</html>
