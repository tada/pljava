<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.6 at 2019-10-21 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>PostgreSQL PL/Java &#x2013; Installation on PostgreSQL releases earlier than 9.2</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20191021" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="https://tada.github.io/pljava/" id="bannerLeft" title="PL/Java logo combining the PostgreSQL elephant and a Java bean">
                                                <img src="../images/pljava_logo.jpg" alt="PL/Java logo combining the PostgreSQL elephant and a Java bean" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2019-10-21</span>
                  &nbsp;| <span id="projectVersion">Version: 1.5.4</span>
                      </div>
            <div class="xright">                    <a href="https://github.com/tada/pljava/wiki/" class="externalLink" title="Wiki">Wiki</a>
            |
                        <a href="https://github.com/tada/pljava/issues" class="externalLink" title="Issues">Issues</a>
            |
                        <a href="http://lists.pgfoundry.org/pipermail/pljava-dev/" class="externalLink" title="Mailing list">Mailing list</a>
            |
                        <a href="https://github.com/tada/pljava/tree/master/" class="externalLink" title="Code">Code</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Usage</h5>
                  <ul>
                  <li class="none">
                          <a href="../build/build.html" title="Building PL/Java">Building PL/Java</a>
            </li>
                  <li class="none">
                          <a href="../install/install.html" title="Installing into PostgreSQL">Installing into PostgreSQL</a>
            </li>
                  <li class="none">
                          <a href="../install/upgrade.html" title="Upgrading">Upgrading</a>
            </li>
                  <li class="none">
                          <a href="../build/package.html" title="Packaging PL/Java">Packaging PL/Java</a>
            </li>
                  <li class="none">
                          <a href="../use/use.html" title="User guide">User guide</a>
            </li>
                  <li class="none">
                          <a href="../develop/develop.html" title="Developer notes">Developer notes</a>
            </li>
          </ul>
                       <h5>Release Information</h5>
                  <ul>
                  <li class="none">
                          <a href="../releasenotes.html" title="Release notes">Release notes</a>
            </li>
          </ul>
                       <h5>Modules</h5>
                  <ul>
                  <li class="none">
                          <a href="../pljava-api/index.html" title="PL/Java API">PL/Java API</a>
            </li>
                  <li class="none">
                          <a href="../pljava/index.html" title="PL/Java backend Java code">PL/Java backend Java code</a>
            </li>
                  <li class="none">
                          <a href="../pljava-so/index.html" title="PL/Java backend native code">PL/Java backend native code</a>
            </li>
                  <li class="none">
                          <a href="../pljava-deploy/index.html" title="PL/Java Deploy">PL/Java Deploy</a>
            </li>
                  <li class="none">
                          <a href="../pljava-ant/index.html" title="PL/Java Ant tasks">PL/Java Ant tasks</a>
            </li>
                  <li class="none">
                          <a href="../pljava-examples/index.html" title="PL/Java examples">PL/Java examples</a>
            </li>
                  <li class="none">
                          <a href="../pljava-packaging/index.html" title="PL/Java packaging">PL/Java packaging</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <h1>Installation on PostgreSQL releases earlier than 9.2</h1>
<p>In PostgreSQL releases 9.2 and later, PL/Java can be installed entirely without disturbing the <tt>postgresql.conf</tt> file or reloading/restarting the server: the configuration variables can be set interactively in a session until PL/Java loads sucessfully, then saved with a simple <tt>ALTER DATABASE</tt> <i>dbname</i> <tt>SET</tt> <i>var</i> <tt>FROM CURRENT</tt> for each setting that had to be changed.</p>
<p>Releases earlier than 9.2 are slightly less convenient. It is still possible to work out the right settings in an interactive session, but once found, the settings must be added to <tt>postgresql.conf</tt> to be persistent, and the postmaster signalled (with <tt>pg_ctl reload</tt>) to pick up the new settings.</p>
<p>Releases before 9.2 also require setting <tt>custom_variable_classes</tt> in <tt>postgresql.conf</tt> to include the prefix <tt>pljava</tt>, and that assignment must be earlier in the file than any settings of <tt>pljava.*</tt> variables.</p>
<div class="section">
<h2><a name="Trying_settings_interactively"></a>Trying settings interactively</h2>
<p>It is still possible to do an exploratory session to find the variable settings that work before touching <tt>postgresql.conf</tt> at all, but the details are slightly different.</p>
<p>In later PostgreSQL versions, you would typically use some <tt>SET</tt> commands followed by a <tt>LOAD</tt> (followed, perhaps, by more <tt>SET</tt> commands unless you always get things right on the first try).</p>
<p>Before release 9.2, however, the order has to be <tt>LOAD</tt> first, which typically will lead to an incompletely-started warning because the configuration settings have not been made yet. <i>Then</i>, because the module has been loaded, <tt>pljava.*</tt> variables will be recognized and can be set and changed until PL/Java successfully loads, just as in the newer versions of PostgreSQL.</p>
<p>Once working settings are found, edit <tt>postgresql.conf</tt>, make sure that <tt>custom_variable_classes</tt> includes <tt>pljava</tt>, copy in the variable settings that worked, and use <tt>pg_ctl reload</tt> to make the new settings effective.</p></div>
<div class="section">
<h2><a name="But_what_if_I_want_the_load_to_fail_and_it_doesnt"></a>But what if I want the load to fail and it doesn&#x2019;t?</h2>
<p>The procedure above relies on the way loading stops when the settings are not right, giving you a chance to adjust them interactively. That turns out to be a problem if there are previously-saved settings, or the original defaults, that happen to <i>work</i> even if they are not the settings you want. In that case, the <tt>LOAD</tt> command starts PL/Java right up, leaving you no chance in the interactive session to change anything.</p>
<p>To escape that behavior, there is one more very simple configuration variable, <tt>pljava.enable</tt>. If it is <tt>off</tt>, <tt>LOAD</tt>ing PL/Java will always stop early and allow you to set other variables before setting <tt>pljava.enable</tt> to <tt>on</tt>.</p>
<p>To answer the hen-and-egg question of how to set <tt>pljava.enable</tt> to <tt>off</tt> before loading the module, it <i>defaults</i> to <tt>off</tt> on PostgreSQL releases earlier than 9.2, so you will always have the chance to test your settings interactively (and you will always have to set it explicitly <tt>on</tt> when you are ready).</p>
<p>If it is already <tt>on</tt> because of an earlier configuration saved in <tt>postgresql.conf</tt>, it will be recognized in your interactive session and you can set it <tt>off</tt> as needed.</p>
<p>On later PostgreSQL releases with no such complications, it defaults to <tt>on</tt> and can be ignored.</p></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2003&#x2013;2019
                        <a href="http://tada.se/eng/">Tada AB</a>.
            All rights reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
