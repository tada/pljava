<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/markdown/install/locatejvm.md at 2025-03-23

 | Rendered using Apache Maven Default Skin
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>PostgreSQL PL/Java &#x2013; Finding the Java Runtime Environment libjvm library</title>
    <link rel="stylesheet" href="../css/maven-base.css" />
    <link rel="stylesheet" href="../css/maven-theme.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
  </head>
  <body class="composite">
    <div id="banner">
<a href="https://tada.github.io/pljava/" id="bannerLeft" title="PL/Java logo combining the PostgreSQL elephant and a Java bean"><img src="../images/pljava_logo.jpg"  alt="PL/Java logo combining the PostgreSQL elephant and a Java bean"/></a>      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 2025-03-23</span>
           | <span id="projectVersion">Version: 1.6.9</span>
      </div>
      <div class="xright"><a href="https://github.com/tada/pljava/wiki/" class="externalLink" title="Wiki">Wiki</a> |
<a href="https://github.com/tada/pljava/issues" class="externalLink" title="Issues">Issues</a> |
<a href="https://www.postgresql.org/list/pljava-dev/" class="externalLink" title="Mailing list">Mailing list</a> |
<a href="https://github.com/tada/pljava/tree/master/" class="externalLink" title="Code">Code</a>      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>Usage</h5>
    <ul>
     <li class="none"><a href="../build/build.html" title="Building PL/Java">Building PL/Java</a></li>
     <li class="none"><a href="../install/install.html" title="Installing into PostgreSQL">Installing into PostgreSQL</a></li>
     <li class="none"><a href="../install/upgrade.html" title="Upgrading">Upgrading</a></li>
     <li class="none"><a href="../build/package.html" title="Packaging PL/Java">Packaging PL/Java</a></li>
     <li class="none"><a href="../use/use.html" title="User guide">User guide</a></li>
     <li class="none"><a href="../develop/develop.html" title="Developer notes">Developer notes</a></li>
    </ul>
       <h5>Release Information</h5>
    <ul>
     <li class="none"><a href="../releasenotes.html" title="Release notes">Release notes</a></li>
    </ul>
       <h5>Modules</h5>
    <ul>
     <li class="none"><a href="../pljava-api/index.html" title="PL/Java API">PL/Java API</a></li>
     <li class="none"><a href="../pljava/index.html" title="PL/Java backend Java code">PL/Java backend Java code</a></li>
     <li class="none"><a href="../pljava-so/index.html" title="PL/Java backend native code">PL/Java backend native code</a></li>
     <li class="none"><a href="../pljava-ant/index.html" title="PL/Java Ant tasks">PL/Java Ant tasks</a></li>
     <li class="none"><a href="../pljava-examples/index.html" title="PL/Java examples">PL/Java examples</a></li>
     <li class="none"><a href="../pljava-packaging/index.html" title="PL/Java packaging">PL/Java packaging</a></li>
     <li class="none"><a href="../pljava-pgxs/index.html" title="PL/Java PGXS">PL/Java PGXS</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="../project-info.html" title="Project Information">Project Information</a></li>
    </ul>
      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
<h1>Finding the Java Runtime Environment <code>libjvm</code> library</h1>
<p>PL/Java <a href="install.html">installation</a> requires knowing the filesystem paths
to some items produced by the <a href="../build/build.html">build</a>, and also to the <code>libjvm</code>
(or just <code>jvm</code> on some platforms, like Windows)
shared object for the Java Runtime Environment that is to be used.</p>
<p>To find that object can be a bit of an exercise, because of
the variety of locations and naming schemes for the Java runtime on
different platforms. It may be simplest to do a filesystem search for
the name <code>libjvm.*</code> under the Java home directory (which is reported
by <code>mvn -v</code> assuming the JRE that you used for running Maven is the
one you intend to use at run time).</p>
<p>The filename extension may be <code>.so</code> on many systems, <code>.bundle</code> on Mac OS X
(see the <a href="../build/macosx.html">Mac OS X build notes</a> for more about OS X),
or <code>.dll</code> on Windows. As Windows also leaves off the <code>lib</code> in front, on
that platform you would look for <code>jvm.dll</code>.</p>
<p>If a tool such as Linux <code>strace</code> is available to see what files are opened
by a process, this works:</p>

<div class="source">
<pre><code>strace -e open java 2&gt;&amp;1 | grep libjvm
</code></pre></div><section>
<h2><a name="Version_of_the_Java_library_selected"></a>Version of the Java library selected</h2>
<p>The library pointed to be <code>pljava.libjvm_location</code> must be a Java 9 or later
JVM for the PL/Java 1.6 series. The actual version of the library will determine
what Java language features are available for PL/Java functions to use.</p>
<p>The Java version also influences whether PL/Java can operate
<a href="../use/policy.html">with security policy enforcement</a> or
<a href="../use/unenforced.html">with no policy enforcement</a>. For stock Java 24 or later, it is only
possible to operate with no enforcement, and the implications detailed for
<a href="../use/unenforced.html">PL/Java with no policy enforcement</a> should be carefully reviewed.</p></section><section>
<h2><a name="Using_a_less-specific_path"></a>Using a less-specific path</h2>
<p>The methods above may find the <code>libjvm</code> object on a very specific path
(for example, including the JRE vendor, major, minor, version, and patch
numbers). If that exact path is used to <code>SET pljava.libjvm_location</code>
in PostgreSQL, PL/Java will stop working as soon as the next Java patch
is applied.</p>
<p>Typical OS distributions will also provide some less specific, alias
paths to the Java runtime environment. On Linux, for example, there
may be a <code>/usr/lib/jvm</code> directory with entries using only the major
and minor Java version that are symbolic links to the fully specified
JRE. By using such an alias instead of the absolutely specific Java
path, you can avoid headaches when Java is updated.</p>
<p>By the same token, the directory of aliases may contain a completely
generic one like <code>jre</code>, linked to whichever Java version is considered
current. Using an alias that is too generic could possibly invite headaches
if the default Java version is ever changed to one your PL/Java modules
were not written for (or PL/Java itself was not built for).</p></section>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2003&#x2013;2025<a href="http://tada.se/eng/">Tada AB</a>.
.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
