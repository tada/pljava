<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.6 at 2016-01-31 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>PostgreSQL PL/Java &#x2013; Finding the Java Runtime Environment libjvm library</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20160131" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="https://tada.github.io/pljava/" id="bannerLeft" title="PL/Java logo combining the PostgreSQL elephant and a Java bean">
                                                <img src="../images/pljava_logo.jpg" alt="PL/Java logo combining the PostgreSQL elephant and a Java bean" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 2016-01-31</span>
                  &nbsp;| <span id="projectVersion">Version: 1.5.0-BETA1</span>
                      </div>
            <div class="xright">                    <a href="https://github.com/tada/pljava/wiki/" class="externalLink" title="Wiki">Wiki</a>
            |
                        <a href="https://github.com/tada/pljava/issues" class="externalLink" title="Issues">Issues</a>
            |
                        <a href="http://lists.pgfoundry.org/pipermail/pljava-dev/" class="externalLink" title="Mailing list">Mailing list</a>
            |
                        <a href="https://github.com/tada/pljava/tree/master/" class="externalLink" title="Code">Code</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Usage</h5>
                  <ul>
                  <li class="none">
                          <a href="../build/build.html" title="Building PL/Java">Building PL/Java</a>
            </li>
                  <li class="none">
                          <a href="../install/install.html" title="Installing into PostgreSQL">Installing into PostgreSQL</a>
            </li>
                  <li class="none">
                          <a href="../use/use.html" title="User guide">User guide</a>
            </li>
          </ul>
                       <h5>Release Information</h5>
                  <ul>
                  <li class="none">
                          <a href="../releasenotes.html" title="Release notes">Release notes</a>
            </li>
          </ul>
                       <h5>Modules</h5>
                  <ul>
                  <li class="none">
                          <a href="../pljava-api/index.html" title="PL/Java API">PL/Java API</a>
            </li>
                  <li class="none">
                          <a href="../pljava/index.html" title="PL/Java backend Java code">PL/Java backend Java code</a>
            </li>
                  <li class="none">
                          <a href="../pljava-so/index.html" title="PL/Java backend native code">PL/Java backend native code</a>
            </li>
                  <li class="none">
                          <a href="../pljava-deploy/index.html" title="PL/Java Deploy">PL/Java Deploy</a>
            </li>
                  <li class="none">
                          <a href="../pljava-ant/index.html" title="PL/Java Ant tasks">PL/Java Ant tasks</a>
            </li>
                  <li class="none">
                          <a href="../pljava-examples/index.html" title="PL/Java examples">PL/Java examples</a>
            </li>
                  <li class="none">
                          <a href="../pljava-packaging/index.html" title="PL/Java packaging">PL/Java packaging</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <h1>Finding the Java Runtime Environment <tt>libjvm</tt> library</h1>
<p>PL/Java <a href="install.html">installation</a> requires knowing the filesystem paths to some items produced by the <a href="../build/build.html">build</a>, and also to the <tt>libjvm</tt> shared object for the Java Runtime Environment that is to be used.</p>
<p>To find that object can be a bit of an exercise, because of the variety of locations and naming schemes for the Java runtime on different platforms. It may be simplest to do a filesystem search for the name <tt>libjvm.*</tt> under the Java home directory (which is reported by <tt>mvn -v</tt> assuming the JRE that you used for running Maven is the one you intend to use at run time).</p>
<p>The filename extension may be <tt>.so</tt> on many systems, <tt>.dll</tt> on Windows, etc. On Mac OS X, the name will end with <tt>.dylib</tt> (see the <a href="../build/macosx.html">Mac OS X build notes</a> for more about Mac OS X).</p>
<p>If a tool such as Linux <tt>strace</tt> is available to see what files are opened by a process, this works:</p>

<div class="source">
<div class="source">
<pre>strace -e open java 2&gt;&amp;1 | grep libjvm
</pre></div></div>
<div class="section">
<h2><a name="Using_a_less-specific_path"></a>Using a less-specific path</h2>
<p>The methods above may find the <tt>libjvm</tt> object on a very specific path (for example, including the JRE vendor, major, minor, version, and patch numbers). If that exact path is used to <tt>SET pljava.libjvm_location</tt> in PostgreSQL, PL/Java will stop working as soon as the next Java patch is applied.</p>
<p>Typical OS distributions will also provide some less specific, alias paths to the Java runtime environment. On Linux, for example, there may be a <tt>/usr/lib/jvm</tt> directory with entries using only the major and minor Java version that are symbolic links to the fully specified JRE. By using such an alias instead of the absolutely specific Java path, you can avoid headaches when Java is updated.</p>
<p>By the same token, the directory of aliases may contain a completely generic one like <tt>jre</tt>, linked to whichever Java version is considered current. Using an alias that is too generic could possibly invite headaches if the default Java version is ever changed to one your PL/Java modules were not written for (or PL/Java itself was not built for).</p></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2003&#x2013;2016
                        <a href="http://tada.se/eng/">Tada AB</a>.
            All rights reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
